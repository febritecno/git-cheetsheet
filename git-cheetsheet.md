**gitリポジトリ作成**  
```
git init  
```
(カレントディレクトリがgitリポジトリのルートディレクトリになる)

参照系
-----

**コミットログ表示**  
```
git log
git log {リビジョン番号}
```

基本的にコマンド引数でリビジョン番号を指定する部分にはブランチ名やタグ名を指定できる

**ワーキングツリーとインデックス上のコミットされていない変更情報**  
```
git status
```

**git status を行ベースでシンプルに表示**  
```
git status -s
```

**コミット作成時の作成者名表示**  
```
git config --get user.name
```

**コミット作成時の作成者メールアドレス表示**  
```
git config --get user.email
```

**コミットツリーのグラフを表示**  
```
git graph
```
この場合コミットメッセージが表示される

**コミットツリーのグラフを表示(短縮表示の例)**  
```
git log --graph --date-order -C -M --pretty=format:'%h [%ar] [%an] %Cgreen%d%Creset %s' --all
```

**コミットの属するブランチを表示**
```
git branch -a --contains {コミットID}
(-aを付けなければローカルブランチ限定で対象コミットが含まれるブランチを表示)
```

indexへの追加/削除など
--------------------

**インデックスへの追加**  
```
git add {ファイル名}
```

**ファイル内の特定部分のみインデックスに追加**
```
git add -p {ファイル名}
```
対話式操作が始まり, ハンクごとに  
y(追加), n(なにもしない), s(ハンクをより細かい行にわける), q(対話操作終了) などを入力する  
sによるハンク分割よりもさらに細かい行単位でインデックスに追加したい場合は  
e(エディタによるマニュアル操作)があるが、その場合は  
SourceTreeなどのGUIツールによる操作の方が直感的である

追跡状態に関する操作
------
リポジトリルート以下の全てのファイルはいずれかの状態にある
- untracked: 新規ファイルなどまだコミットされていないもの
- tracked: すでにコミットされているもの
- ignored: 

**追跡されている任意のファイルを追跡対象から外す**  
```
git rm {ファイル名}
```
- このコマンドでは実際のファイルシステム上からファイルが削除される
- 「ファイルを削除した」という変更はインデックスにも追記される
- このコマンドによりファイルはuntrackedになる。  
  .gitignoreにファイルを書けばファイルはignoreになり、  
  git statusの表示やGUIツールでのコミット時にコミット対象候補から外れる。

**追跡されている任意のファイルを追跡対象から外す ただし実際のファイルシステムにはファイルを残す**  
  ```
  git rm --cached
  ```
  (indexには「ファイルを削除した」という変更が追記される)


コミットの作成
---------------

**ステージングされているファイルからコミット作成**  
```
git commit
```

**ステージングされていない変更のあるTrackedファイルもまとめてコミット**  
```
git commit -a
```


ブランチ系
-----------

**ブランチ移動**  
```
git checkout {branch名}
```

**現在のブランチを表示**  
```
git branch
```

**全てのブランチを表示(origin/xxxも表示される)**  
```
git branch -a
```

**ブランチ作成(現在のHEAD)**  
```
git brachn {新規ブランチ名} [新規ブランチの開始点リビジョン]
```
  例1: git branch issues-22  
  例2: git branch issues-22 e8346b3   

ブランチ作成 + 作成したブランチにチェックアウトを行うコマンド  
```
git checkout -b {新規ブランチ名} [新規ブランチの開始点リビジョン]
```


リモートに関する操作
---------------------

**リモートリポジトリの登録**  
```
git remote add {リモートリポジトリ名} {リモートリポジトリURL}
```

**ローカルコミットをリモートリポジトリに反映 **  
```
git push [リモートリポジトリ名] [更新元ブランチ][:リモートブランチ名]
```

リモートリポジトリを省いた場合、多くの場合 origin にpushされる  
リモートブランチ名を省いた場合(git push origin )  
詳細は man git-pushのEXAMPLESを参照されたし  

git.push.defaultなどの設定によるが  
だいたいのところ初回コミットを除くと `git push` で思った通りの挙動になるはず(説明不足..)  

**リモートリポジトリの内容を取得**  
```
git fetch
```

git fetchではワーキングツリーは更新されない  
ローカルリポジトリが講師されるだけ

**リモートリポジトリの内容を取得し、ローカルに残った不要な追跡ブランチを削除**  
```
git fetch --prune
```
これにより追跡先のないリモート追跡ブランチがローカルから削除できる



stash系
--------

**スタッシュに保存**  
```
git stash save
```
デフォルトではワーキングツリーの「変更があるTrackedファイル」がスタッシュ領域に退避される

**未コミットな新規ファイルなどUntrackedファイルも含めてスタッシュに保存**  
```
git stash --include-untracked
または
git stash -u
```

**スタッシュ上の変更をワーキングツリーに戻す**  
```
git stash pop
```
(引数でどのスタッシュをpopするか選択可能)

**スタッシュを削除する**  
```
git stash drop
```

**保存されたstash一覧を表示**  
```
git stash list
```

**stashの内容をみる**  
```
git stash show -v
```
(引数でどのスタッシュを表示するか選択可能)

履歴修正系
------------

## 作業前の注意
1. ワーキングツリーをキレイにしておくこと  
  (git status -s で M, A, R, U  のファイルががない状態)
2. 誤操作対策として、履歴変更前にbranchを作っておくとよい  

**直近のコミットメッセージを再編集**  
```
git commit --amend
```

**直近のコミットのauthor情報(メールアドレスなど)を表示**  

anymore anymore ....
